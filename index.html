<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Jeux Kabir ‚Äì Ultimate Pro</title>
<style>
:root{
  --bg1:#0f0c29; --bg2:#302b63; --bg3:#24243e;
  --card:#10131aee; --muted:#aab3c4; --primary:#7cf5ff; --accent:#8b5cf6; --danger:#ff6b6b; --success:#22c55e;
}
*{box-sizing:border-box;margin:0;padding:0;}
html,body{height:100%;font-family:Inter,sans-serif;color:#eef3ff;background:linear-gradient(-45deg,var(--bg1),var(--bg2),var(--bg3));background-size:400% 400%;animation:bgMove 25s ease infinite;overflow-x:hidden;}
@keyframes bgMove{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
.container{max-width:1100px;margin:0 auto;padding:20px;}
.card{background:var(--card);border-radius:22px;padding:20px;backdrop-filter:blur(10px);box-shadow:0 10px 30px rgba(0,0,0,.4);}
h1,h2{text-align:center;}
.muted{color:var(--muted);text-align:center;}
.btn{appearance:none;border:none;padding:14px 18px;border-radius:14px;cursor:pointer;font-weight:700;font-size:16px;color:#0b0f17;background:linear-gradient(135deg,#e0fbff,var(--primary));box-shadow:0 10px 20px rgba(124,245,255,.25), inset 0 1px 0 #fff;transition:.2s transform,.3s box-shadow,.2s filter;user-select:none;width:100%;max-width:250px;margin:auto;display:block;}
.btn:active{transform:translateY(1px);}
.grid{display:grid;gap:16px;}
@media (min-width:860px){.grid.cols-2{grid-template-columns:1fr 1fr;}}
.screen{display:none;}
.screen.active{display:block;}
.inputRow{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;}
input[type="text"]{flex:1;min-width:140px;padding:14px 16px;border-radius:12px;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.06);color:#fff;font-size:16px;outline:none;}
input::placeholder{color:#97a3b7;}
.notice{margin-top:10px;font-weight:600;text-align:center;}
.cup-container{display:flex;justify-content:space-between;align-items:flex-end;gap:60px;margin-top:50px;perspective:900px;}
.cupWrap{position:relative;width:90px;height:120px;cursor:pointer;transform-style:preserve-3d;transition:transform 0.6s ease;}
.cup{width:100%;height:100%;background:linear-gradient(to top,#c69c6d,#e0c097);border-radius:0 0 20px 20px;display:flex;align-items:flex-end;justify-content:center;box-shadow:0 10px 20px rgba(0,0,0,.5);}
.cupLabel{color:#fff;font-weight:700;font-size:22px;margin-bottom:12px;text-shadow:0 0 6px #fff;}
.padGrid{display:grid;grid-template-columns:repeat(2,150px);grid-template-rows:repeat(2,150px);gap:20px;justify-content:center;margin-top:20px;}
.pad{border-radius:16px;cursor:pointer;box-shadow:0 5px 15px rgba(0,0,0,.4);transition:filter .2s,transform .2s;}
.pad.red{background:#ff4c4c;}
.pad.green{background:#4cff4c;}
.pad.blue{background:#4c4cff;}
.pad.yellow{background:#ffff4c;}
.pad.active{filter:brightness(1.8) drop-shadow(0 0 20px #fff);}
.particle{position:fixed;pointer-events:none;width:8px;height:8px;border-radius:50%;background:radial-gradient(circle,#fff,rgba(255,255,255,0));opacity:.2;animation:float 12s linear infinite;}
@keyframes float{from{transform:translateY(110vh)}to{transform:translateY(-20vh)}}
</style>
</head>
<body>
<div class="container">

<!-- INTRO -->
<section id="screen-intro" class="screen active card">
<h1>Bienvenue üëã</h1>
<p class="muted">R√©ponds aux questions pour entrer :</p>
<div class="section">
<h2 id="questionLabel"></h2>
<p id="questionText" class="notice"></p>
<div class="inputRow">
<input id="answerInput" type="text" placeholder="Ta r√©ponse ici" autocomplete="off">
<button id="answerBtn" class="btn">Valider</button>
</div>
<p id="introMsg" class="notice"></p>
</div>
</section>

<!-- MENU -->
<section id="screen-menu" class="screen card">
<h1>Menu principal</h1>
<p class="muted">Choisis un mini‚Äëjeu :</p>
<div class="grid cols-2">
<button class="btn" id="btn-bonneteau">üé© Bonneteau</button>
<button class="btn" id="btn-simon">üé® Simon Game</button>
</div>
</section>

<!-- BONNETEAU -->
<section id="screen-bonneteau" class="screen card">
<h2>Bonneteau üé©</h2>
<div class="cup-container">
  <div class="cupWrap" data-index="0"><div class="cup"><div class="cupLabel">‚óè</div></div></div>
  <div class="cupWrap" data-index="1"><div class="cup"><div class="cupLabel">‚óè</div></div></div>
  <div class="cupWrap" data-index="2"><div class="cup"><div class="cupLabel">‚óè</div></div></div>
</div>
<div style="margin-top:20px;text-align:center;">
<button class="btn" id="bn-shuffle">M√©langer</button>
<p id="bn-msg" class="notice"></p>
</div>
</section>

<!-- SIMON -->
<section id="screen-simon" class="screen card">
<h2>Simon Game üé®</h2>
<div class="padGrid">
  <div class="pad red" data-pad="0"></div>
  <div class="pad green" data-pad="1"></div>
  <div class="pad blue" data-pad="2"></div>
  <div class="pad yellow" data-pad="3"></div>
</div>
<div style="text-align:center;margin-top:20px;">
<button class="btn" id="sm-start">D√©marrer</button>
<p id="sm-msg" class="notice"></p>
</div>
</section>

</div>

<!-- AUDIO -->
<audio id="bgm" loop src="https://cdn.pixabay.com/download/audio/2022/10/20/audio_d6a1a0f8bd.mp3?filename=cyber-dream-ambient-124841.mp3"></audio>
<audio id="billeSound" src="https://freesound.org/data/previews/335/335908_586551-lq.mp3"></audio>
<audio id="redNote" src="https://freesound.org/data/previews/256/256113_3263906-lq.mp3"></audio>
<audio id="greenNote" src="https://freesound.org/data/previews/256/256114_3263906-lq.mp3"></audio>
<audio id="blueNote" src="https://freesound.org/data/previews/256/256115_3263906-lq.mp3"></audio>
<audio id="yellowNote" src="https://freesound.org/data/previews/256/256116_3263906-lq.mp3"></audio>

<script>
// ==== PARTICULES ====
for(let i=0;i<30;i++){
  const p=document.createElement('div'); p.className='particle';
  p.style.left=Math.random()*100+'vw';
  p.style.animationDelay=(Math.random()*-12)+'s';
  p.style.opacity=.1+Math.random()*.25;
  document.body.appendChild(p);
}

// ==== QUESTIONS INTRO ====
const questions=[
  {text:"Qui est le meilleur ami de Kabir ?",answer:"jesus"},
  {text:"Quelle est la premi√®re amoureuse de Kabir ?",answer:"francoise"}
];
let step=0;
const qLabel=document.querySelector('#questionLabel');
const qText=document.querySelector('#questionText');
const introMsg=document.querySelector('#introMsg');
const answerInput=document.querySelector('#answerInput');
const answerBtn=document.querySelector('#answerBtn');

function setQuestion(){ 
  qLabel.textContent=`Question ${step+1}/2`; 
  qText.textContent=questions[step].text; 
  answerInput.value=''; introMsg.textContent=''; answerInput.focus();
}
function verifyCurrent(){
  const raw=(answerInput.value||'').trim().toLowerCase();
  if(raw===questions[step].answer){ step=2; enterMenu(); }
  else{ step++; if(step<questions.length){ setQuestion(); } else enterMenu(); }
}
answerBtn.addEventListener('click',verifyCurrent);
answerInput.addEventListener('keydown',e=>{if(e.key==='Enter') verifyCurrent();});
setQuestion();

function show(id){ document.querySelectorAll('.screen').forEach(el=>el.classList.remove('active')); document.querySelector('#'+id).classList.add('active');}
function enterMenu(){ show('screen-menu'); document.querySelector('#bgm').play();}

// ==== MENU ====
document.querySelector('#btn-bonneteau').addEventListener('click',()=>{show('screen-bonneteau'); initBonneteau();});
document.querySelector('#btn-simon').addEventListener('click',()=>{show('screen-simon'); initSimon();});

// ==== BONNETEAU ====
let cupOrder=[0,1,2],ballIndex=0,shuffling=false;
function initBonneteau(){
  const cups=document.querySelectorAll('.cupWrap');
  // visible au d√©part
  cupOrder=[0,1,2];
  ballIndex=Math.floor(Math.random()*3);
  cups.forEach((c,i)=>c.querySelector('.cupLabel').style.visibility=(i===ballIndex?'visible':'hidden'));
  document.querySelector('#bn-msg').textContent='Clique sur "M√©langer" pour commencer';
}

document.querySelector('#bn-shuffle').addEventListener('click',()=>{
  if(shuffling) return; shuffling=true; const cups=document.querySelectorAll('.cupWrap'); document.querySelector('#bn-msg').textContent='M√©lange en cours...';
  // cache la balle
  cups.forEach(c=>c.querySelector('.cupLabel').style.visibility='hidden');
  let moves=0;
  const interval=setInterval(()=>{
    const a=Math.floor(Math.random()*3),b=Math.floor(Math.random()*3); if(a!==b){[cupOrder[a],cupOrder[b]]=[cupOrder[b],cupOrder[a]];}
    cups.forEach((c,i)=>{c.style.transform=`rotateY(${360*moves}deg) translateX(${cupOrder[i]*0}px)`});
    moves++; if(moves>20){clearInterval(interval); shuffling=false; document.querySelector('#bn-msg').textContent='Clique sur un gobelet pour deviner la balle'; addCupClicks(); }
  },150);
});

function addCupClicks(){
  const cups=document.querySelectorAll('.cupWrap');
  cups.forEach(c=>c.addEventListener('click',cupClick));
}
function cupClick(e){
  const idx=parseInt(e.currentTarget.dataset.index);
  if(idx===ballIndex){document.querySelector('#bn-msg').textContent='Bravo! üéâ';document.querySelector('#billeSound').play();}
  else{document.querySelector('#bn-msg').textContent='Rat√© üò¢ La balle √©tait ici.';document.querySelectorAll('.cupWrap')[ballIndex].querySelector('.cupLabel').style.visibility='visible';}
  document.querySelectorAll('.cupWrap').forEach(c=>c.removeEventListener('click',cupClick));
}

// ==== SIMON GAME ====
let sequence=[],userSeq=[],level=0,canClick=false;
const pads=document.querySelectorAll('.pad');
const sounds=['redNote','greenNote','blueNote','yellowNote'];
function initSimon(){sequence=[];userSeq=[];level=0;canClick=false; document.querySelector('#sm-msg').textContent='Appuie sur D√©marrer';}
document.querySelector('#sm-start').addEventListener('click',nextSimonLevel);

pads.forEach(pad=>{
  pad.addEventListener('click',()=>{
    if(!canClick) return;
    const idx=parseInt(pad.dataset.pad);
    userSeq.push(idx); playPad(idx);
    if(idx!==sequence[userSeq.length-1]){ document.querySelector('#sm-msg').textContent='Rat√© üò¢'; canClick=false; return;}
    if(userSeq.length===sequence.length){ canClick=false; setTimeout(nextSimonLevel,800);}
  });
});

function nextSimonLevel(){
  level++; document.querySelector('#sm-msg').textContent='Niveau '+level;
  sequence.push(Math.floor(Math.random()*4));
  userSeq=[]; playSequence();
}

function playSequence(){
  canClick=false;
  sequence.forEach((val,i)=>{
    setTimeout(()=>{playPad(val);}, i*800);
  });
  setTimeout(()=>{canClick=true;}, sequence.length*800);
}

function playPad(idx){
  const pad=pads[idx];
  pad.classList.add('active');
  document.getElementById(sounds[idx]).currentTime=0; document.getElementById(sounds[idx]).play();
  setTimeout(()=>pad.classList.remove('active'),400);
}
</script>
</body>
</html>
